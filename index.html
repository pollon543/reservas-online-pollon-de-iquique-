<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reservas - El Poll√≥n</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        * {
            box-sizing: border-box;
        }

        .step-indicator {
            transition: all 0.3s ease;
        }

        .step-active {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(220, 38, 38, 0.4);
        }

        .step-completed {
            background: rgba(0, 0, 0, 0.05);
            color: rgba(0, 0, 0, 0.5);
            border-color: rgba(0, 0, 0, 0.1) !important;
        }

        .step-inactive {
            background: rgba(0, 0, 0, 0.02);
            color: rgba(0, 0, 0, 0.3);
        }

        .product-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .time-slot {
            transition: all 0.3s;
            cursor: pointer;
        }

        .time-slot:hover:not(.disabled) {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.3);
        }

        .time-slot.selected {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%) !important;
            color: white !important;
            border-color: #DC2626 !important;
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.5) !important;
        }

        .time-slot.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .quantity-btn {
            transition: background-color 0.2s;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #DC2626;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
            }
            50% { 
                transform: scale(1.1);
                opacity: 0.7;
            }
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: rgba(245, 245, 245, 0.6);
            border-radius: 10px;
            margin-bottom: 10px;
            border: 1px solid rgba(0, 0, 0, 0.08);
        }
        
        .category-menu-item {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            margin-bottom: 8px;
            border: 2px solid rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 700;
            color: #000000;
            font-size: 14px;
        }
        
        .category-menu-item:hover {
            background: rgba(220, 38, 38, 0.1);
            border-color: rgba(220, 38, 38, 0.4);
            transform: translateX(4px);
        }
        
        .category-carousel {
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 -8px;
            padding: 0 8px;
        }
        
        .carousel-scroll-container {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            flex: 1;
            padding: 4px 0;
        }
        
        .carousel-scroll-container::-webkit-scrollbar {
            display: none;
        }
        
        .carousel-arrow {
            background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
            transition: all 0.3s;
            z-index: 10;
        }
        
        .carousel-arrow:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(220, 38, 38, 0.5);
        }
        
        .carousel-arrow:active {
            transform: scale(0.95);
        }
        
        .carousel-arrow.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .category-filter {
            flex-shrink: 0;
            white-space: nowrap;
        }
        
        @media (max-width: 640px) {
            #header-title {
                display: none !important;
            }
            
            h1 {
                font-size: 32px !important;
            }
            
            h2 {
                font-size: 24px !important;
            }
            
            .step-indicator {
                padding: 10px 16px !important;
                font-size: 12px !important;
            }
            
            .product-card h3 {
                font-size: 16px !important;
                min-height: 40px !important;
            }
            
            .product-card p {
                font-size: 13px !important;
            }
            
            .time-slot {
                font-size: 16px !important;
                padding: 16px !important;
            }
            
            .carousel-arrow {
                width: 36px;
                height: 36px;
                font-size: 18px;
            }
            
            #products-step h2,
            .category-carousel,
            #products-list {
                padding-left: 16px !important;
                padding-right: 16px !important;
            }
            
            #main-content-card {
                border-radius: 12px !important;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 28px !important;
            }
            
            h2 {
                font-size: 20px !important;
            }
            
            .step-indicator {
                padding: 8px 12px !important;
                font-size: 11px !important;
            }
            
            #products-list {
                grid-template-columns: 1fr !important;
            }
            
            #time-slots {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)) !important;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body>
  <div id="app" style="width: 100%; min-height: 100%; background: #FFFFFF; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;"><!-- Fixed Header Bar with Cart Info -->
   <div id="cart-header-bar" style="position: sticky; top: 0; z-index: 100; background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); padding: 12px 16px; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1); border-bottom: 2px solid rgba(220, 38, 38, 0.2); width: 100%;">
    <div style="max-width: 1200px; margin: 0 auto;">
     <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 8px;"><button id="btn-categories-menu" style="background: rgba(0, 0, 0, 0.05); color: #000000; padding: 8px 12px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 8px; font-size: 14px; font-weight: 700; cursor: pointer; transition: all 0.3s; display: none; white-space: nowrap;" onmouseover="this.style.background='rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(0, 0, 0, 0.05)'"> ‚ò∞ Categor√≠as </button>
      <div id="header-title" style="flex: 1; text-align: center; font-size: 18px; font-weight: 900; color: #DC2626;">
       üçó El Poll√≥n
      </div><button id="btn-view-cart" style="background: linear-gradient(135deg, #FCD34D 0%, #F59E0B 100%); color: #000000; padding: 8px 12px; border: none; border-radius: 8px; font-size: 14px; font-weight: 900; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 12px rgba(252, 211, 77, 0.4); display: flex; align-items: center; gap: 8px; position: relative; white-space: nowrap;" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 6px 16px rgba(252, 211, 77, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(252, 211, 77, 0.4)'"> üõí Carrito <span id="cart-badge-header" style="background: #000000; color: #FCD34D; border-radius: 50%; width: 22px; height: 22px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 900;">0</span> </button>
     </div>
     <div id="progress-container" style="display: none; margin-top: 8px;">
      <div style="display: flex; align-items: center; justify-content: space-between; gap: 8px; margin-bottom: 6px;"><span id="remaining-amount-header" style="font-size: 11px; color: rgba(0, 0, 0, 0.6); font-weight: 600;">Faltan $200.000 para m√≠nimo</span> <span id="progress-percentage" style="font-size: 12px; font-weight: 900; color: #DC2626;">0%</span>
      </div>
      <div id="minimum-progress-header" style="width: 100%; height: 4px; background: rgba(0, 0, 0, 0.1); border-radius: 0; overflow: hidden;">
       <div id="progress-bar-header" style="height: 100%; background: linear-gradient(90deg, #DC2626, #F59E0B, #16A34A); width: 0%; transition: width 0.5s ease;"></div>
      </div>
     </div>
     <div id="categories-dropdown" style="position: absolute; top: 100%; left: 16px; margin-top: 8px; background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 2px solid rgba(0, 0, 0, 0.1); min-width: 250px; max-width: 90vw; z-index: 999; display: none; flex-direction: column; overflow: hidden;">
      <div style="padding: 16px; border-bottom: 2px solid rgba(220, 38, 38, 0.2); display: flex; justify-content: space-between; align-items: center;">
       <h3 style="font-size: 16px; font-weight: 700; color: #000000; margin: 0;">üìÇ Categor√≠as</h3><button id="close-categories-dropdown" style="background: none; border: none; font-size: 24px; color: #000000; cursor: pointer; padding: 0; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;">√ó</button>
      </div>
      <div style="padding: 12px;" id="categories-dropdown-body">
      </div>
     </div>
     <div id="cart-dropdown-panel" style="position: absolute; top: 100%; right: 16px; margin-top: 8px; background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(20px); border-radius: 12px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); border: 2px solid rgba(0, 0, 0, 0.1); min-width: 320px; max-width: 90vw; max-height: 70vh; z-index: 999; display: none; flex-direction: column; overflow: hidden;">
      <div style="padding: 16px; border-bottom: 2px solid rgba(220, 38, 38, 0.2); display: flex; justify-content: space-between; align-items: center;">
       <h3 style="font-size: 16px; font-weight: 700; color: #000000; margin: 0;">üõí Tu Carrito</h3><button id="close-cart-dropdown" style="background: none; border: none; font-size: 24px; color: #000000; cursor: pointer; padding: 0; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;">√ó</button>
      </div>
      <div style="padding: 16px; overflow-y: auto; flex: 1;" id="cart-dropdown-body">
      </div>
      <div style="padding: 16px; border-top: 2px solid rgba(220, 38, 38, 0.2); background: rgba(220, 38, 38, 0.05);">
       <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;"><span style="font-size: 16px; font-weight: 700; color: #000000;">Total:</span> <span id="cart-total-dropdown" style="font-size: 20px; font-weight: 900; color: #DC2626;">$0</span>
       </div><button id="btn-continue-to-data" style="width: 100%; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 14px; border: none; border-radius: 10px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 16px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(220, 38, 38, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 16px rgba(220, 38, 38, 0.4)'"> Continuar a Datos ‚Üí </button>
       <div id="cart-minimum-warning" style="display: none; margin-top: 12px; background: rgba(245, 158, 11, 0.15); border: 2px solid rgba(245, 158, 11, 0.4); border-radius: 10px; padding: 12px; text-align: center;">
        <div style="font-size: 12px; font-weight: 700; color: #B45309; line-height: 1.5;"></div>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Hero Section -->
   <div style="width: 100%; background: linear-gradient(180deg, rgba(220, 38, 38, 0.05) 0%, rgba(255, 255, 255, 0) 100%), repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0, 0, 0, 0.01) 10px, rgba(0, 0, 0, 0.01) 20px); padding: 40px 24px 60px; position: relative; overflow: hidden;">
    <div style="position: absolute; top: -50%; left: -10%; width: 500px; height: 500px; background: radial-gradient(circle, rgba(220, 38, 38, 0.15) 0%, transparent 70%); border-radius: 50%; filter: blur(60px);"></div>
    <div style="position: absolute; bottom: -50%; right: -10%; width: 500px; height: 500px; background: radial-gradient(circle, rgba(220, 38, 38, 0.15) 0%, transparent 70%); border-radius: 50%; filter: blur(60px);"></div>
    <div style="max-width: 1200px; margin: 0 auto; position: relative; z-index: 1;">
     <div style="text-align: center; margin-bottom: 40px; position: relative;"><button id="btn-home" style="position: absolute; left: 0; top: 0; background: rgba(0, 0, 0, 0.03); backdrop-filter: blur(10px); color: #000000; padding: 12px 24px; border: 2px solid rgba(220, 38, 38, 0.3); border-radius: 12px; font-size: 14px; font-weight: 700; cursor: pointer; transition: all 0.3s; display: none; align-items: center; gap: 8px;" onmouseover="this.style.background='#DC2626'; this.style.color='#FFFFFF'; this.style.borderColor='#DC2626';" onmouseout="this.style.background='rgba(0, 0, 0, 0.03)'; this.style.color='#000000'; this.style.borderColor='rgba(220, 38, 38, 0.3)';"> ‚Üê Volver al Inicio </button>
      <div style="display: inline-flex; align-items: center; justify-content: center; width: 120px; height: 120px; background: white; border-radius: 24px; margin-bottom: 24px; box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2); border: 4px solid rgba(220, 38, 38, 0.2); overflow: hidden;"><img src="https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&amp;h=400&amp;fit=crop" alt="Logo El Poll√≥n" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.style.display='none'; this.parentElement.innerHTML='<span style=font-size:56px>üçó</span>'">
      </div>
      <h1 id="restaurant-title" style="font-size: 56px; font-weight: 900; background: linear-gradient(135deg, #000000 0%, #DC2626 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 12px; letter-spacing: -1px;">Poller√≠a El Poll√≥n</h1>
      <p style="font-size: 20px; color: rgba(0, 0, 0, 0.6); font-weight: 500; margin-bottom: 24px;">Sistema de Reservas en L√≠nea - Experiencia Premium</p>
      <div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, rgba(220, 38, 38, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%); backdrop-filter: blur(10px); border: 2px solid rgba(220, 38, 38, 0.3); border-radius: 16px; padding: 20px 32px; box-shadow: 0 8px 32px rgba(220, 38, 38, 0.2); position: relative; overflow: hidden;">
       <div style="position: absolute; top: -10px; right: -10px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(220, 38, 38, 0.15) 0%, transparent 70%); border-radius: 50%; animation: pulse 3s ease-in-out infinite;"></div>
       <div style="position: absolute; bottom: -10px; left: -10px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(245, 158, 11, 0.15) 0%, transparent 70%); border-radius: 50%; animation: pulse 3s ease-in-out infinite; animation-delay: 1.5s;"></div>
       <div style="display: flex; align-items: center; gap: 16px; position: relative; z-index: 1;">
        <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); width: 56px; height: 56px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 28px; box-shadow: 0 4px 16px rgba(220, 38, 38, 0.4); flex-shrink: 0;">
         üí∞
        </div>
        <div style="flex: 1; text-align: left;">
         <div style="font-size: 14px; font-weight: 700; color: rgba(0, 0, 0, 0.6); margin-bottom: 4px; letter-spacing: 0.5px;">
          MONTO M√çNIMO PARA RESERVA
         </div>
         <div style="font-size: 32px; font-weight: 900; background: linear-gradient(135deg, #DC2626 0%, #F59E0B 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; line-height: 1;">
          $200.000
         </div>
        </div>
       </div>
      </div>
     </div>
     <div style="display: flex; justify-content: center; gap: 8px; margin-bottom: 0; flex-wrap: wrap;">
      <div class="step-indicator step-active" id="step-1" style="padding: 14px 28px; border-radius: 12px; font-weight: 700; font-size: 14px; backdrop-filter: blur(10px); border: 2px solid rgba(220, 38, 38, 0.5); transition: all 0.3s;">
       1. Fecha
      </div>
      <div class="step-indicator step-inactive" id="step-2" style="padding: 14px 28px; border-radius: 12px; font-weight: 700; font-size: 14px; backdrop-filter: blur(10px); border: 2px solid rgba(0, 0, 0, 0.1); transition: all 0.3s;">
       2. Hora
      </div>
      <div class="step-indicator step-inactive" id="step-3" style="padding: 14px 28px; border-radius: 12px; font-weight: 700; font-size: 14px; backdrop-filter: blur(10px); border: 2px solid rgba(0, 0, 0, 0.1); transition: all 0.3s;">
       3. Productos
      </div>
      <div class="step-indicator step-inactive" id="step-4" style="padding: 14px 28px; border-radius: 12px; font-weight: 700; font-size: 14px; backdrop-filter: blur(10px); border: 2px solid rgba(0, 0, 0, 0.1); transition: all 0.3s;">
       4. Datos
      </div>
     </div>
    </div>
   </div><!-- Main Content Section -->
   <div style="max-width: 1200px; margin: -40px auto 0; padding: 0 24px 60px; position: relative; z-index: 2;">
    <div id="main-content-card" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border-radius: 24px; padding: 48px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0.05);"><!-- Schedule Page -->
     <div id="schedule-page" style="display: none;">
      <div style="text-align: center; margin-bottom: 48px;">
       <div style="display: inline-flex; align-items: center; justify-content: center; width: 80px; height: 80px; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); border-radius: 20px; margin-bottom: 24px; box-shadow: 0 10px 30px rgba(220, 38, 38, 0.4);"><span style="font-size: 48px;">üïê</span>
       </div>
       <h2 style="font-size: 40px; font-weight: 900; color: #000000; margin-bottom: 12px; letter-spacing: -1px;">Horarios de Atenci√≥n</h2>
       <p style="font-size: 18px; color: rgba(0, 0, 0, 0.6);">Poller√≠a El Poll√≥n - Siempre listos para atenderte</p>
      </div>
      <div style="display: grid; gap: 24px; max-width: 800px; margin: 0 auto;">
       <div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 20px; padding: 32px; border: 2px solid rgba(220, 38, 38, 0.2); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); transition: all 0.3s;" onmouseover="this.style.borderColor='rgba(220, 38, 38, 0.5)'; this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 40px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.borderColor='rgba(220, 38, 38, 0.2)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 32px rgba(0, 0, 0, 0.1)'">
        <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 24px;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); width: 64px; height: 64px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: 0 4px 16px rgba(220, 38, 38, 0.4); flex-shrink: 0;">
          üìÖ
         </div>
         <h3 style="font-size: 28px; font-weight: 800; color: #000000; margin: 0;">Domingo a Jueves</h3>
        </div>
        <div style="background: rgba(0, 0, 0, 0.03); padding: 24px; border-radius: 16px; border-left: 4px solid #DC2626;">
         <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
          <div>
           <div style="font-size: 12px; color: rgba(0, 0, 0, 0.5); font-weight: 700; margin-bottom: 8px; letter-spacing: 1px;">
            APERTURA
           </div>
           <div style="font-size: 32px; font-weight: 900; color: #DC2626;">
            12:30 hrs
           </div>
          </div>
          <div style="font-size: 40px; color: rgba(220, 38, 38, 0.3);">
           ‚Üí
          </div>
          <div>
           <div style="font-size: 12px; color: rgba(0, 0, 0, 0.5); font-weight: 700; margin-bottom: 8px; letter-spacing: 1px;">
            CIERRE
           </div>
           <div style="font-size: 32px; font-weight: 900; color: #DC2626;">
            00:00 hrs
           </div>
          </div>
         </div>
        </div>
       </div>
       <div style="background: rgba(220, 38, 38, 0.05); backdrop-filter: blur(10px); border-radius: 20px; padding: 32px; border: 2px solid rgba(220, 38, 38, 0.4); box-shadow: 0 8px 32px rgba(220, 38, 38, 0.15); transition: all 0.3s;" onmouseover="this.style.borderColor='rgba(220, 38, 38, 0.7)'; this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 40px rgba(220, 38, 38, 0.25)'" onmouseout="this.style.borderColor='rgba(220, 38, 38, 0.4)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 32px rgba(220, 38, 38, 0.15)'">
        <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 24px;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); width: 64px; height: 64px; border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: 0 4px 16px rgba(220, 38, 38, 0.4); flex-shrink: 0;">
          üéâ
         </div>
         <h3 style="font-size: 28px; font-weight: 800; color: #000000; margin: 0;">Viernes y S√°bado</h3>
        </div>
        <div style="background: rgba(0, 0, 0, 0.03); padding: 24px; border-radius: 16px; border-left: 4px solid #DC2626;">
         <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
          <div>
           <div style="font-size: 12px; color: rgba(0, 0, 0, 0.5); font-weight: 700; margin-bottom: 8px; letter-spacing: 1px;">
            APERTURA
           </div>
           <div style="font-size: 32px; font-weight: 900; color: #DC2626;">
            12:30 hrs
           </div>
          </div>
          <div style="font-size: 40px; color: rgba(220, 38, 38, 0.3);">
           ‚Üí
          </div>
          <div>
           <div style="font-size: 12px; color: rgba(0, 0, 0, 0.5); font-weight: 700; margin-bottom: 8px; letter-spacing: 1px;">
            CIERRE
           </div>
           <div style="font-size: 32px; font-weight: 900; color: #DC2626;">
            01:00 hrs
           </div>
          </div>
         </div>
        </div>
       </div>
       <div style="background: rgba(220, 38, 38, 0.08); backdrop-filter: blur(10px); border-radius: 16px; padding: 24px; border-left: 4px solid #DC2626; border: 1px solid rgba(220, 38, 38, 0.2);">
        <div style="display: flex; gap: 16px; align-items: start;">
         <div style="font-size: 28px; flex-shrink: 0;">
          ‚ÑπÔ∏è
         </div>
         <div>
          <div style="font-weight: 800; color: #000000; font-size: 18px; margin-bottom: 8px;">
           Nota Importante
          </div>
          <div style="color: rgba(0, 0, 0, 0.7); font-size: 15px; line-height: 1.7;">
           Nuestra cocina toma la √∫ltima comanda hasta <strong style="color: #DC2626;">1 hora antes del cierre</strong> del restaurante.
          </div>
         </div>
        </div>
       </div>
      </div>
      <div style="text-align: center; margin-top: 48px;"><button id="btn-back-from-schedule" style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 18px 40px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(220, 38, 38, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(220, 38, 38, 0.4)'"> ‚Üê Volver al Inicio </button>
      </div>
     </div><!-- Policies Page -->
     <div id="policies-page" style="display: none;">
      <div style="text-align: center; margin-bottom: 48px;">
       <div style="display: inline-flex; align-items: center; justify-content: center; width: 80px; height: 80px; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); border-radius: 20px; margin-bottom: 24px; box-shadow: 0 10px 30px rgba(220, 38, 38, 0.4);"><span style="font-size: 48px;">üìã</span>
       </div>
       <h2 style="font-size: 40px; font-weight: 900; color: #000000; margin-bottom: 12px; letter-spacing: -1px;">Pol√≠ticas del Restaurante</h2>
       <p style="font-size: 18px; color: rgba(0, 0, 0, 0.6);">Para brindarte el mejor servicio</p>
      </div>
      <div style="display: grid; gap: 20px; max-width: 800px; margin: 0 auto;">
       <div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 16px; padding: 28px; border-left: 4px solid #DC2626; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: all 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.4)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.12)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.08)'">
        <div style="display: flex; gap: 20px; align-items: start;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 900; flex-shrink: 0; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);">
          1
         </div>
         <div style="flex: 1;">
          <h4 style="font-size: 20px; font-weight: 800; color: #000000; margin: 0 0 12px 0;">‚è∞ Horario de Comandas</h4>
          <p style="color: rgba(0, 0, 0, 0.7); margin: 0; line-height: 1.7; font-size: 15px;">Nuestra cocina toma la <strong style="color: #DC2626;">√∫ltima comanda hasta 1 hora antes del cierre</strong> del restaurante.</p>
         </div>
        </div>
       </div>
       <div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 16px; padding: 28px; border-left: 4px solid #DC2626; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: all 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.4)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.12)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.08)'">
        <div style="display: flex; gap: 20px; align-items: start;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 900; flex-shrink: 0; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);">
          2
         </div>
         <div style="flex: 1;">
          <h4 style="font-size: 20px; font-weight: 800; color: #000000; margin: 0 0 12px 0;">‚è≥ Tiempo de Espera de Reservas</h4>
          <p style="color: rgba(0, 0, 0, 0.7); margin: 0; line-height: 1.7; font-size: 15px;">La espera m√°xima de las mesas reservadas es de <strong style="color: #DC2626;">30 minutos</strong>. Pasado ese tiempo, las mesas se liberan y pueden ser utilizadas por otros clientes.</p>
         </div>
        </div>
       </div>
       <div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 16px; padding: 28px; border-left: 4px solid #DC2626; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: all 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.4)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.12)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.08)'">
        <div style="display: flex; gap: 20px; align-items: start;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 900; flex-shrink: 0; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);">
          3
         </div>
         <div style="flex: 1;">
          <h4 style="font-size: 20px; font-weight: 800; color: #000000; margin: 0 0 12px 0;">üçΩÔ∏è Men√∫s Especiales</h4>
          <p style="color: rgba(0, 0, 0, 0.7); margin: 0; line-height: 1.7; font-size: 15px;">Si requiere un <strong style="color: #DC2626;">men√∫ especial para cel√≠acos o veganos</strong>, debe informar al menos con <strong style="color: #DC2626;">24 horas de anticipaci√≥n</strong> a su reserva.</p>
         </div>
        </div>
       </div>
       <div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 16px; padding: 28px; border-left: 4px solid #DC2626; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: all 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.4)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.12)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.08)'">
        <div style="display: flex; gap: 20px; align-items: start;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 900; flex-shrink: 0; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);">
          4
         </div>
         <div style="flex: 1;">
          <h4 style="font-size: 20px; font-weight: 800; color: #000000; margin: 0 0 12px 0;">üë• Reservas de Grupos</h4>
          <p style="color: rgba(0, 0, 0, 0.7); margin: 0; line-height: 1.7; font-size: 15px;">Para reservas de grupos <strong style="color: #DC2626;">(m√°s de 10 personas)</strong> se aconseja pedir una cotizaci√≥n previa para optimizar los tiempos de nuestro servicio.</p>
         </div>
        </div>
       </div>
       <div style="background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-radius: 16px; padding: 28px; border-left: 4px solid #DC2626; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: all 0.3s;" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.4)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.12)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.08)'">
        <div style="display: flex; gap: 20px; align-items: start;">
         <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; font-weight: 900; flex-shrink: 0; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);">
          5
         </div>
         <div style="flex: 1;">
          <h4 style="font-size: 20px; font-weight: 800; color: #000000; margin: 0 0 12px 0;">üéÇ Eventos y Celebraciones</h4>
          <p style="color: rgba(0, 0, 0, 0.7); margin: 0; line-height: 1.7; font-size: 15px;">Para <strong style="color: #DC2626;">eventos especiales, celebraciones, cumplea√±os</strong> o cualquier manifestaci√≥n especial, sugerimos comunicarse con la administraci√≥n con anticipaci√≥n para poder preparar su requerimiento.</p>
         </div>
        </div>
       </div>
       <div style="background: rgba(220, 38, 38, 0.08); backdrop-filter: blur(10px); border-radius: 16px; padding: 32px; text-align: center; margin-top: 24px; border: 1px solid rgba(220, 38, 38, 0.2);">
        <div style="font-size: 40px; margin-bottom: 16px;">
         üìû
        </div>
        <h4 style="font-size: 24px; font-weight: 900; color: #000000; margin: 0 0 24px 0;">Opciones de Reserva</h4>
        <div style="display: grid; gap: 16px; text-align: left;">
         <div style="background: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 12px; display: flex; align-items: center; gap: 16px; border: 1px solid rgba(0, 0, 0, 0.1); transition: all 0.3s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.3)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.05)'">
          <div style="font-size: 28px;">
           üåê
          </div>
          <div>
           <div style="font-weight: 800; color: #000000; font-size: 16px;">
            V√≠a Web
           </div>
           <div style="color: rgba(0, 0, 0, 0.6); font-size: 14px;">
            Sistema de Reservas en L√≠nea
           </div>
          </div>
         </div>
         <div style="background: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 12px; display: flex; align-items: center; gap: 16px; border: 1px solid rgba(0, 0, 0, 0.1); transition: all 0.3s; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.borderColor='rgba(220, 38, 38, 0.3)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.05)'">
          <div style="font-size: 28px;">
           üí¨
          </div>
          <div>
           <div style="font-weight: 800; color: #000000; font-size: 16px;">
            WhatsApp
           </div>
           <div style="color: rgba(0, 0, 0, 0.6); font-size: 14px;" id="whatsapp-display">
            +56 9 1234 5678
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div style="text-align: center; margin-top: 48px;"><button id="btn-back-from-policies" style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 18px 40px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(220, 38, 38, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(220, 38, 38, 0.4)'"> ‚Üê Volver al Inicio </button>
      </div>
     </div><!-- Step 1: Date Selection -->
     <div id="date-step" style="display: block;">
      <h2 style="font-size: 36px; font-weight: 900; color: #000000; margin-bottom: 32px; letter-spacing: -0.5px;">Selecciona la Fecha de tu Reserva</h2>
      <div style="text-align: center; margin-bottom: 32px;">
       <div style="display: inline-flex; align-items: center; justify-content: center; width: 120px; height: 120px; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); border-radius: 24px; box-shadow: 0 20px 50px rgba(220, 38, 38, 0.4); border: 3px solid rgba(255, 255, 255, 0.1); margin-bottom: 24px;"><span style="font-size: 72px;">üìÖ</span>
       </div>
      </div>
      <div style="margin-bottom: 32px;"><label for="date-input" style="display: block; font-weight: 800; color: #000000; margin-bottom: 16px; font-size: 24px; text-align: center;">üìÜ Fecha de Reserva</label> <input type="date" id="date-input" style="width: 100%; padding: 28px 24px; border: 3px solid rgba(220, 38, 38, 0.3); border-radius: 16px; font-size: 24px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.95); color: #000000; backdrop-filter: blur(10px); font-weight: 700; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1); cursor: pointer;" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 6px rgba(220, 38, 38, 0.15)'; this.style.transform='scale(1.02)'" onblur="this.style.borderColor='rgba(220, 38, 38, 0.3)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.1)'; this.style.transform='scale(1)'">
      </div><button id="btn-date-next" style="width: 100%; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 20px; border: none; border-radius: 12px; font-size: 20px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(220, 38, 38, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(220, 38, 38, 0.4)'"> Continuar a Hora ‚Üí </button>
     </div><!-- Step 2: Time Selection -->
     <div id="time-step" style="display: none;">
      <h2 style="font-size: 36px; font-weight: 900; color: #000000; margin-bottom: 16px; letter-spacing: -0.5px;">Selecciona la Hora</h2>
      <h2 style="font-size: 28px; font-weight: 700; color: #DC2626; margin-bottom: 32px; letter-spacing: -0.5px;">‚è∞ Horarios disponibles para este d√≠a</h2>
      <div id="time-slots" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 16px; margin-bottom: 32px;">
      </div>
      <div style="display: flex; gap: 16px;"><button id="btn-time-back" style="flex: 1; background: rgba(0, 0, 0, 0.03); backdrop-filter: blur(10px); color: #000000; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(0, 0, 0, 0.08)'; this.style.borderColor='rgba(0, 0, 0, 0.2)'" onmouseout="this.style.background='rgba(0, 0, 0, 0.03)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'"> ‚Üê Atr√°s </button> <button id="btn-time-next" style="flex: 2; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 18px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(220, 38, 38, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(220, 38, 38, 0.4)'"> Continuar a Productos ‚Üí </button>
      </div>
     </div><!-- Step 3: Product Selection -->
     <div id="products-step" style="display: none;">
      <h2 style="font-size: 36px; font-weight: 900; color: #000000; margin-bottom: 32px; letter-spacing: -0.5px; padding: 0 48px;">Selecciona tus Productos</h2>
      <div class="category-carousel" style="margin-bottom: 32px; padding: 0 48px;"><button id="carousel-left" class="carousel-arrow hidden">‚Äπ</button>
       <div id="category-filters" class="carousel-scroll-container">
       </div><button id="carousel-right" class="carousel-arrow">‚Ä∫</button>
      </div>
      <div id="products-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; margin-bottom: 32px; padding: 0 48px;">
      </div>
     </div><!-- Step 4: Customer Data -->
     <div id="data-step" style="display: none;">
      <h2 style="font-size: 36px; font-weight: 900; color: #000000; margin-bottom: 32px; letter-spacing: -0.5px;">Completa tus Datos</h2>
      <div style="background: rgba(220, 38, 38, 0.08); backdrop-filter: blur(10px); padding: 28px; border-radius: 16px; margin-bottom: 32px; border: 2px solid rgba(220, 38, 38, 0.2);">
       <h3 style="font-size: 22px; font-weight: 900; color: #000000; margin-bottom: 20px;">Resumen de tu Reserva</h3>
       <div style="display: grid; gap: 16px;">
        <div style="display: flex; justify-content: space-between; padding-bottom: 12px; border-bottom: 1px solid rgba(0, 0, 0, 0.1);"><span style="color: rgba(0, 0, 0, 0.7); font-weight: 700;">Fecha:</span> <span id="summary-date" style="color: #000000; font-weight: 800;"></span>
        </div>
        <div style="display: flex; justify-content: space-between; padding-bottom: 12px; border-bottom: 1px solid rgba(0, 0, 0, 0.1);"><span style="color: rgba(0, 0, 0, 0.7); font-weight: 700;">Hora:</span> <span id="summary-time" style="color: #000000; font-weight: 800;"></span>
        </div>
        <div style="display: flex; justify-content: space-between; padding-top: 8px;"><span style="color: rgba(0, 0, 0, 0.7); font-weight: 700; font-size: 20px;">Total:</span> <span id="summary-total" style="color: #DC2626; font-weight: 900; font-size: 28px;"></span>
        </div>
       </div>
      </div>
      <form id="customer-form">
       <div style="margin-bottom: 24px;"><label for="customer-name" style="display: block; font-weight: 700; color: rgba(0, 0, 0, 0.9); margin-bottom: 12px; font-size: 18px;">Nombre Completo *</label> <input type="text" id="customer-name" required style="width: 100%; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.8); color: #000000; backdrop-filter: blur(10px);" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 4px rgba(220, 38, 38, 0.1)'" onblur="this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='none'" placeholder="Juan P√©rez">
       </div>
       <div style="margin-bottom: 24px;"><label for="customer-phone" style="display: block; font-weight: 700; color: rgba(0, 0, 0, 0.9); margin-bottom: 12px; font-size: 18px;">Tel√©fono *</label> <input type="tel" id="customer-phone" required style="width: 100%; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.8); color: #000000; backdrop-filter: blur(10px);" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 4px rgba(220, 38, 38, 0.1)'" onblur="this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='none'" placeholder="+56 9 1234 5678">
       </div>
       <div style="margin-bottom: 24px;"><label for="customer-rut" style="display: block; font-weight: 700; color: rgba(0, 0, 0, 0.9); margin-bottom: 12px; font-size: 18px;">RUT *</label> <input type="text" id="customer-rut" required style="width: 100%; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.8); color: #000000; backdrop-filter: blur(10px);" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 4px rgba(220, 38, 38, 0.1)'" onblur="this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='none'" placeholder="12.345.678-9">
       </div>
       <div style="margin-bottom: 24px;"><label for="customer-people" style="display: block; font-weight: 700; color: rgba(0, 0, 0, 0.9); margin-bottom: 12px; font-size: 18px;">Cantidad de Personas *</label> <input type="number" id="customer-people" required min="1" max="50" style="width: 100%; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.8); color: #000000; backdrop-filter: blur(10px);" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 4px rgba(220, 38, 38, 0.1)'" onblur="this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='none'" placeholder="Ejemplo: 8">
       </div>
       <div style="margin-bottom: 24px;"><label for="customer-reason" style="display: block; font-weight: 700; color: rgba(0, 0, 0, 0.9); margin-bottom: 12px; font-size: 18px;">Motivo de Reserva *</label> <select id="customer-reason" required style="width: 100%; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.8); color: #000000; backdrop-filter: blur(10px); cursor: pointer;" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 4px rgba(220, 38, 38, 0.1)'" onblur="this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='none'"> <option value="">Selecciona un motivo</option> <option value="Cumplea√±os">üéÇ Cumplea√±os</option> <option value="Aniversario">üíï Aniversario</option> <option value="Reuni√≥n Familiar">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Reuni√≥n Familiar</option> <option value="Reuni√≥n de Trabajo">üíº Reuni√≥n de Trabajo</option> <option value="Celebraci√≥n">üéâ Celebraci√≥n</option> <option value="Almuerzo/Cena">üçΩÔ∏è Almuerzo/Cena</option> <option value="Otro">‚ú® Otro</option> </select>
       </div>
       <div style="margin-bottom: 32px;"><label for="customer-comment" style="display: block; font-weight: 700; color: rgba(0, 0, 0, 0.9); margin-bottom: 12px; font-size: 18px;">Comentario (Opcional)</label> <textarea id="customer-comment" rows="4" style="width: 100%; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; outline: none; transition: all 0.3s; background: rgba(255, 255, 255, 0.8); color: #000000; backdrop-filter: blur(10px); resize: vertical; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;" onfocus="this.style.borderColor='#DC2626'; this.style.boxShadow='0 0 0 4px rgba(220, 38, 38, 0.1)'" onblur="this.style.borderColor='rgba(0, 0, 0, 0.1)'; this.style.boxShadow='none'" placeholder="Alguna solicitud especial, alergias alimentarias, preferencias de mesa, etc."></textarea>
       </div>
       <div style="display: flex; gap: 16px;"><button type="button" id="btn-data-back" style="flex: 1; background: rgba(0, 0, 0, 0.03); backdrop-filter: blur(10px); color: #000000; padding: 18px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(0, 0, 0, 0.08)'; this.style.borderColor='rgba(0, 0, 0, 0.2)'" onmouseout="this.style.background='rgba(0, 0, 0, 0.03)'; this.style.borderColor='rgba(0, 0, 0, 0.1)'"> ‚Üê Atr√°s </button> <button type="submit" id="btn-submit" style="flex: 2; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; padding: 18px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 8px 24px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 32px rgba(220, 38, 38, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 24px rgba(220, 38, 38, 0.4)'"> <span id="submit-text">Enviar Reserva por WhatsApp</span> <span id="submit-loading" style="display: none;" class="loading-spinner"></span> </button>
       </div>
      </form>
     </div><!-- Success Message -->
     <div id="success-message" style="display: none; text-align: center;">
      <div style="font-size: 72px; margin-bottom: 20px;">
       ‚úÖ
      </div>
      <h2 style="font-size: 32px; font-weight: 700; color: #16A34A; margin-bottom: 16px;">¬°Reserva Enviada!</h2>
      <p style="font-size: 18px; color: #6B7280; margin-bottom: 24px;">Tu reserva ha sido enviada por WhatsApp correctamente.</p><button id="btn-new-reservation" style="background: #DC2626; color: white; padding: 16px 32px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.2s;" onmouseover="this.style.background='#B91C1C'" onmouseout="this.style.background='#DC2626'"> Nueva Reserva </button>
     </div>
    </div>
   </div><!-- Footer Info Panel -->
   <div style="width: 100%; background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 245, 245, 0.95) 100%); backdrop-filter: blur(20px); border-top: 3px solid rgba(220, 38, 38, 0.3); padding: 0; margin-top: 60px; box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.05);">
    <div style="max-width: 1200px; margin: 0 auto; padding: 60px 24px 40px;">
     <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 48px; margin-bottom: 48px;">
      <div>
       <h3 style="font-size: 20px; font-weight: 900; color: #DC2626; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; letter-spacing: -0.5px;">üïê Horarios de Atenci√≥n</h3>
       <div style="background: rgba(255, 255, 255, 0.6); padding: 20px; border-radius: 12px; border-left: 4px solid #DC2626; margin-bottom: 16px;">
        <div style="font-weight: 800; color: #000000; font-size: 15px; margin-bottom: 8px;">
         üìÖ Lunes a Domingo
        </div>
        <div style="color: rgba(0, 0, 0, 0.7); font-size: 14px; line-height: 1.6;">
         Previa Coordinaci√≥n en Horarios Disponibles
        </div>
       </div>
       <div style="background: rgba(220, 38, 38, 0.08); padding: 20px; border-radius: 12px; border-left: 4px solid #DC2626; margin-bottom: 16px;">
        <div style="font-weight: 800; color: #000000; font-size: 15px; margin-bottom: 8px;">
         ‚è∞ Reservas
        </div>
        <div style="color: rgba(0, 0, 0, 0.7); font-size: 14px; line-height: 1.6;">
         Antes de 24 horas
        </div>
       </div>
      </div>
      <div>
       <h3 style="font-size: 20px; font-weight: 900; color: #DC2626; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; letter-spacing: -0.5px;">üìã Pol√≠ticas del Restaurante</h3>
       <div style="display: flex; flex-direction: column; gap: 14px;">
        <div style="display: flex; gap: 12px; align-items: start;">
         <div style="color: #DC2626; font-size: 18px; flex-shrink: 0;">
          üí∞
         </div>
         <div>
          <div style="font-weight: 700; color: #000000; font-size: 14px; margin-bottom: 4px;">
           Monto M√≠nimo
          </div>
          <div style="color: rgba(0, 0, 0, 0.7); font-size: 13px; line-height: 1.5;">
           Reservas desde $200.000
          </div>
         </div>
        </div>
        <div style="display: flex; gap: 12px; align-items: start;">
         <div style="color: #DC2626; font-size: 18px; flex-shrink: 0;">
          ‚è≥
         </div>
         <div>
          <div style="font-weight: 700; color: #000000; font-size: 14px; margin-bottom: 4px;">
           Tiempo de Espera
          </div>
          <div style="color: rgba(0, 0, 0, 0.7); font-size: 13px; line-height: 1.5;">
           M√°ximo 30 minutos de espera
          </div>
         </div>
        </div>
        <div style="display: flex; gap: 12px; align-items: start;">
         <div style="color: #DC2626; font-size: 18px; flex-shrink: 0;">
          üë•
         </div>
         <div>
          <div style="font-weight: 700; color: #000000; font-size: 14px; margin-bottom: 4px;">
           Grupos Grandes
          </div>
          <div style="color: rgba(0, 0, 0, 0.7); font-size: 13px; line-height: 1.5;">
           +10 personas: Cotizaci√≥n previa
          </div>
         </div>
        </div>
       </div>
      </div>
      <div>
       <h3 style="font-size: 20px; font-weight: 900; color: #DC2626; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; letter-spacing: -0.5px;">üìû Contacto</h3>
       <div style="display: flex; flex-direction: column; gap: 16px;"><a id="footer-whatsapp-link" href="#" target="_blank" rel="noopener noreferrer" style="text-decoration: none; display: block; background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); padding: 20px; border-radius: 12px; box-shadow: 0 4px 16px rgba(37, 211, 102, 0.3); transition: all 0.3s; cursor: pointer;" onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 24px rgba(37, 211, 102, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 16px rgba(37, 211, 102, 0.3)'">
         <div style="display: flex; align-items: center; gap: 16px;">
          <div style="background: rgba(255, 255, 255, 0.2); width: 56px; height: 56px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 32px; backdrop-filter: blur(10px);">
           üí¨
          </div>
          <div style="flex: 1;">
           <div style="font-weight: 900; color: #FFFFFF; font-size: 16px; margin-bottom: 4px;">
            WhatsApp
           </div>
           <div style="color: rgba(255, 255, 255, 0.9); font-size: 13px; line-height: 1.5;" id="footer-whatsapp">
            +56 9 1234 5678
           </div>
           <div style="color: rgba(255, 255, 255, 0.8); font-size: 12px; margin-top: 4px; font-weight: 600;">
            Atenci√≥n personalizada y coordinaciones
           </div>
          </div>
         </div></a>
        <div style="background: rgba(255, 255, 255, 0.6); padding: 18px; border-radius: 12px; border: 1px solid rgba(0, 0, 0, 0.1);">
         <div style="display: flex; align-items: center; gap: 12px;">
          <div style="background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px;">
           üìç
          </div>
          <div>
           <div style="font-weight: 800; color: #000000; font-size: 14px;">
            Ubicaci√≥n
           </div>
           <div style="color: rgba(0, 0, 0, 0.6); font-size: 13px;">
            Iquique, Calle Vivar 1086
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div style="height: 2px; background: linear-gradient(90deg, transparent 0%, rgba(220, 38, 38, 0.3) 50%, transparent 100%); margin: 40px 0;"></div>
     <div style="text-align: center;">
      <div style="font-size: 16px; color: rgba(0, 0, 0, 0.7); margin-bottom: 20px; font-weight: 700;">
       S√≠guenos en Redes Sociales
      </div>
      <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;"><a href="https://www.facebook.com" target="_blank" rel="noopener noreferrer" style="width: 60px; height: 60px; background: linear-gradient(135deg, #1877F2 0%, #0C63D4 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 16px rgba(24, 119, 242, 0.3); text-decoration: none;" onmouseover="this.style.transform='translateY(-5px) scale(1.05)'; this.style.boxShadow='0 8px 24px rgba(24, 119, 242, 0.5)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 16px rgba(24, 119, 242, 0.3)'">
        <svg width="32" height="32" viewbox="0 0 24 24" fill="white"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
        </svg></a> <a href="https://www.instagram.com" target="_blank" rel="noopener noreferrer" style="width: 60px; height: 60px; background: linear-gradient(135deg, #E1306C 0%, #C13584 50%, #833AB4 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 16px rgba(225, 48, 108, 0.3); text-decoration: none;" onmouseover="this.style.transform='translateY(-5px) scale(1.05)'; this.style.boxShadow='0 8px 24px rgba(225, 48, 108, 0.5)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 16px rgba(225, 48, 108, 0.3)'">
        <svg width="32" height="32" viewbox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
        </svg></a> <a href="https://www.tiktok.com" target="_blank" rel="noopener noreferrer" style="width: 60px; height: 60px; background: linear-gradient(135deg, #000000 0%, #1A1A1A 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3); text-decoration: none;" onmouseover="this.style.transform='translateY(-5px) scale(1.05)'; this.style.boxShadow='0 8px 24px rgba(0, 0, 0, 0.5)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.3)'">
        <svg width="28" height="28" viewbox="0 0 24 24" fill="white"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z" />
        </svg></a>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
        const products = [
            // OFERTAS FAMILIARES
            { id: 1, name: 'Oferton mas chaufa', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 24500, description: 'Pollo entero, papas fritas, arroz chaufa, ensalada y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=300&fit=crop' },
            { id: 2, name: 'Oferton mas fideo', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 24500, description: 'Pollo entero, papas fritas, fideos al pesto, ensalada y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1633964913295-ceb438267482?w=400&h=300&fit=crop' },
            { id: 3, name: 'Oferton mas chaufa pura papa', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 24500, description: 'Pollo entero, papas fritas, extra papa frita, arroz chaufa y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=400&h=300&fit=crop' },
            { id: 4, name: 'Oferton con fideo', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 23500, description: 'Pollo entero, papas fritas, fideos al pesto y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1632334342937-2fda8e3448a2?w=400&h=300&fit=crop' },
            { id: 5, name: 'Oferton sin ensalada', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 23500, description: 'Pollo entero, papas fritas, arroz chaufa y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1594221708779-94832f4320d1?w=400&h=300&fit=crop' },
            { id: 6, name: 'Oferton pura papa', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 23500, description: 'Pollo entero, papas fritas, 1/2 porcion de papa frita y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1626645738196-c2a7c87a8f58?w=400&h=300&fit=crop' },
            { id: 7, name: 'Oferton familiar', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 22500, description: 'Pollo entero, papas fritas, ensalada y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=300&fit=crop' },
            { id: 8, name: 'Mega Familiar', category: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', price: 22500, description: 'Pollo entero, papas fritas, ensalada y bebidas 1.5lt', image: 'https://images.unsplash.com/photo-1633504581786-316c8002b1b1?w=400&h=300&fit=crop' },
            
            // OFERTAS PARA DOS
            { id: 9, name: '1/2 combo chaufa', category: 'üë´ Ofertas para Dos', price: 15600, description: 'Medio pollo, papas fritas, arroz chaufa', image: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=400&h=300&fit=crop' },
            { id: 10, name: '1/2 combo', category: 'üë´ Ofertas para Dos', price: 15100, description: 'Medio pollo, papas fritas, ensalada personal', image: 'https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=300&fit=crop' },
            { id: 11, name: '1/2 combo pura papa', category: 'üë´ Ofertas para Dos', price: 15100, description: 'Medio pollo, papas fritas mas cantidad', image: 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=400&h=300&fit=crop' },
            
            // OFERTAS PERSONALES
            { id: 12, name: '1/4 combo', category: 'üßë Ofertas Personales', price: 8100, description: '1/4 pollo, papas fritas personales, ensalada personal', image: 'https://images.unsplash.com/photo-1594221708779-94832f4320d1?w=400&h=300&fit=crop' },
            { id: 13, name: '1/4 combo pura papa', category: 'üßë Ofertas Personales', price: 8100, description: '1/4 pollo, papas fritas personales mas cantidad', image: 'https://images.unsplash.com/photo-1632334342937-2fda8e3448a2?w=400&h=300&fit=crop' },
            { id: 14, name: 'Chaufa brasa', category: 'üßë Ofertas Personales', price: 8200, description: '1/4 pollo, arroz chaufa', image: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=400&h=300&fit=crop' },
            { id: 15, name: 'Fideo al pesto con 1/4 de pollo', category: 'üßë Ofertas Personales', price: 8100, description: '1/4 pollo, fideos al pesto', image: 'https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=400&h=300&fit=crop' },
            { id: 16, name: 'Chaufa brasa con papas fritas', category: 'üßë Ofertas Personales', price: 9200, description: '1/4 pollo, papas fritas personal, arroz chaufa', image: 'https://images.unsplash.com/photo-1599487488170-d11ec9c172f0?w=400&h=300&fit=crop' },
            
            // PLATOS EXTRAS
            { id: 17, name: 'Lomo saltado con chaufa', category: 'üçΩÔ∏è Platos Extras', price: 12200, description: 'Lomo saltado con arroz chaufa', image: 'https://images.unsplash.com/photo-1626645738196-c2a7c87a8f58?w=400&h=300&fit=crop' },
            { id: 18, name: 'Lomo saltado de carne con arroz blanco', category: 'üçΩÔ∏è Platos Extras', price: 11700, description: 'Lomo saltado de carne con arroz blanco', image: 'https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?w=400&h=300&fit=crop' },
            { id: 19, name: 'Lomo saltado de pollo con arroz blanco', category: 'üçΩÔ∏è Platos Extras', price: 11700, description: 'Lomo saltado de pollo con arroz blanco', image: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=400&h=300&fit=crop' },
            { id: 20, name: 'Tallarin saltado', category: 'üçΩÔ∏è Platos Extras', price: 11700, description: 'Tallarin saltado con verduras', image: 'https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=400&h=300&fit=crop' },
            { id: 21, name: 'Bistec a lo pobre', category: 'üçΩÔ∏è Platos Extras', price: 10700, description: 'Bistec a lo pobre con huevo y papas', image: 'https://images.unsplash.com/photo-1588168333986-5078d3ae3976?w=400&h=300&fit=crop' },
            { id: 22, name: 'Bistec con fideos al pesto', category: 'üçΩÔ∏è Platos Extras', price: 10700, description: 'Bistec con fideos al pesto', image: 'https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=400&h=300&fit=crop' },
            { id: 23, name: 'Chuleta de cerdo', category: 'üçΩÔ∏è Platos Extras', price: 10700, description: 'Chuleta de cerdo con guarnici√≥n', image: 'https://images.unsplash.com/photo-1529193591184-b1d58069ecdd?w=400&h=300&fit=crop' },
            { id: 24, name: 'Pechuga a la plancha', category: 'üçΩÔ∏è Platos Extras', price: 10200, description: 'Pechuga de pollo a la plancha', image: 'https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?w=400&h=300&fit=crop' },
            { id: 25, name: 'Combo nuggets', category: 'üçΩÔ∏è Platos Extras', price: 6700, description: 'Nuggets de pollo con papas fritas', image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=300&fit=crop' },
            { id: 26, name: 'Salchipapas', category: 'üçΩÔ∏è Platos Extras', price: 6700, description: 'Salchipapas cl√°sicas', image: 'https://images.unsplash.com/photo-1599940824399-b87987ceb72a?w=400&h=300&fit=crop' },
            
            // AGREGADOS
            { id: 27, name: '1 Pollo entero solo', category: '‚ûï Agregados', price: 15000, description: '1 pollo entero', image: 'https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=400&h=300&fit=crop' },
            { id: 28, name: '1/2 Pollo solo', category: '‚ûï Agregados', price: 9900, description: '1/2 pollo - parte truto y pechuga', image: 'https://images.unsplash.com/photo-1594221708779-94832f4320d1?w=400&h=300&fit=crop' },
            { id: 29, name: '1/4 pollo solo', category: '‚ûï Agregados', price: 5800, description: '1/4 de pollo - truto o pechuga - seg√∫n el stock', image: 'https://images.unsplash.com/photo-1633504581786-316c8002b1b1?w=400&h=300&fit=crop' },
            { id: 30, name: 'Porcion de papas fritas familiar', category: '‚ûï Agregados', price: 9000, description: 'Porci√≥n grande de papas crujientes', image: 'https://images.unsplash.com/photo-1573080496219-bb080dd4f877?w=400&h=300&fit=crop' },
            { id: 31, name: '1/2 porcion de papas fritas', category: '‚ûï Agregados', price: 6100, description: 'Media Porci√≥n de papas crujientes', image: 'https://images.unsplash.com/photo-1573080496219-bb080dd4f877?w=400&h=300&fit=crop' },
            { id: 32, name: 'Porcion de arroz chaufa', category: '‚ûï Agregados', price: 5300, description: '1 Porci√≥n de arroz chaufa', image: 'https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=400&h=300&fit=crop' },
            { id: 33, name: 'Porcion de fideos al pesto', category: '‚ûï Agregados', price: 5300, description: '1 Porci√≥n de fideos al pesto', image: 'https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=400&h=300&fit=crop' },
            { id: 34, name: 'Porcion de ensalada familiar', category: '‚ûï Agregados', price: 5400, description: 'Ensalada surtida - familiar', image: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop' },
            { id: 35, name: 'Porcion de ensalada personal', category: '‚ûï Agregados', price: 3700, description: 'Ensalada surtida - personal', image: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop' }
        ];

        const defaultConfig = {
            restaurant_name: 'Poller√≠a El Poll√≥n',
            whatsapp_number: '56912345678',
            available_hours: '12:00, 12:30, 13:00, 13:30, 19:00, 19:30, 20:00, 20:30, 21:00',
            background_color: '#FFFFFF',
            primary_color: '#DC2626',
            text_color: '#000000',
            secondary_color: '#F5F5F5',
            button_color: '#DC2626'
        };

        let currentStep = 1;
        let selectedDate = '';
        let selectedTime = '';
        let cart = {};
        let reservationData = [];
        let selectedCategory = 'all';

        const dataHandler = {
            onDataChanged(data) {
                reservationData = data;
            }
        };

        async function init() {
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error('Error al inicializar SDK de datos');
                }
            }

            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        document.getElementById('restaurant-title').textContent = `üçó ${config.restaurant_name || defaultConfig.restaurant_name}`;
                        const headerTitle = document.getElementById('header-title');
                        if (headerTitle) {
                            headerTitle.textContent = `üçó ${(config.restaurant_name || defaultConfig.restaurant_name).replace('Poller√≠a ', '')}`;
                        }
                        document.body.style.background = `linear-gradient(135deg, ${config.background_color || defaultConfig.background_color} 0%, ${config.secondary_color || defaultConfig.secondary_color} 100%)`;
                        
                        const stepActive = document.querySelectorAll('.step-active');
                        stepActive.forEach(el => el.style.backgroundColor = config.primary_color || defaultConfig.primary_color);
                        
                        const buttons = document.querySelectorAll('button[id^="btn-"]');
                        buttons.forEach(btn => {
                            if (btn.id.includes('submit') || btn.id.includes('new')) {
                                btn.style.backgroundColor = config.button_color || defaultConfig.button_color;
                            } else if (!btn.id.includes('back')) {
                                btn.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
                            }
                        });
                        
                        renderTimeSlots(config);
                        updateFooter();
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || defaultConfig.background_color,
                                set: (value) => {
                                    if (window.elementSdk && window.elementSdk.config) {
                                        window.elementSdk.config.background_color = value;
                                        window.elementSdk.setConfig({ background_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.primary_color || defaultConfig.primary_color,
                                set: (value) => {
                                    if (window.elementSdk && window.elementSdk.config) {
                                        window.elementSdk.config.primary_color = value;
                                        window.elementSdk.setConfig({ primary_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.text_color || defaultConfig.text_color,
                                set: (value) => {
                                    if (window.elementSdk && window.elementSdk.config) {
                                        window.elementSdk.config.text_color = value;
                                        window.elementSdk.setConfig({ text_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.secondary_color || defaultConfig.secondary_color,
                                set: (value) => {
                                    if (window.elementSdk && window.elementSdk.config) {
                                        window.elementSdk.config.secondary_color = value;
                                        window.elementSdk.setConfig({ secondary_color: value });
                                    }
                                }
                            },
                            {
                                get: () => config.button_color || defaultConfig.button_color,
                                set: (value) => {
                                    if (window.elementSdk && window.elementSdk.config) {
                                        window.elementSdk.config.button_color = value;
                                        window.elementSdk.setConfig({ button_color: value });
                                    }
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ['restaurant_name', config.restaurant_name || defaultConfig.restaurant_name],
                        ['whatsapp_number', config.whatsapp_number || defaultConfig.whatsapp_number],
                        ['available_hours', config.available_hours || defaultConfig.available_hours]
                    ])
                });
            }

            setupEventListeners();
            renderCategoryFilters();
            renderProducts();
            renderCategoriesDropdown();
            setMinDate();
            setupCarousel();
            updateFooter();
        }

        function setMinDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date-input').setAttribute('min', today);
        }

        function renderTimeSlots(config) {
            const timeSlotsContainer = document.getElementById('time-slots');
            
            let hours = [];
            if (selectedDate) {
                const date = new Date(selectedDate + 'T00:00:00');
                const dayOfWeek = date.getDay();
                
                if (dayOfWeek === 5 || dayOfWeek === 6 || dayOfWeek === 0) {
                    hours = ['19:30', '20:00', '20:30', '21:00'];
                } 
                else if (dayOfWeek >= 1 && dayOfWeek <= 4) {
                    hours = ['19:00', '19:30', '20:00', '20:30', '21:00', '21:30'];
                }
            }
            
            timeSlotsContainer.innerHTML = '';
            hours.forEach(hour => {
                const slot = document.createElement('div');
                slot.className = 'time-slot';
                slot.textContent = hour;
                slot.dataset.time = hour;
                slot.style.cssText = 'padding: 20px; border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 12px; text-align: center; font-weight: 700; color: #000000; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); font-size: 18px;';
                
                slot.addEventListener('click', function() {
                    if (!this.classList.contains('disabled')) {
                        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                        this.classList.add('selected');
                        selectedTime = this.dataset.time;
                    }
                });
                
                timeSlotsContainer.appendChild(slot);
            });
        }

        function renderCategoriesDropdown() {
            const categoriesBody = document.getElementById('categories-dropdown-body');
            categoriesBody.innerHTML = '';
            
            const categories = [
                { key: 'all', label: 'üî• Todo el Men√∫' },
                { key: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares', label: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Familiares' },
                { key: 'üë´ Ofertas para Dos', label: 'üë´ Para Dos' },
                { key: 'üßë Ofertas Personales', label: 'üßë Personales' },
                { key: 'üçΩÔ∏è Platos Extras', label: 'üçΩÔ∏è Extras' },
                { key: '‚ûï Agregados', label: '‚ûï Agregados' }
            ];
            
            categories.forEach(cat => {
                const item = document.createElement('div');
                item.className = 'category-menu-item';
                item.textContent = cat.label;
                item.addEventListener('click', () => {
                    selectedCategory = cat.key;
                    renderCategoryFilters();
                    renderProducts();
                    document.getElementById('categories-dropdown').style.display = 'none';
                    
                    document.getElementById('products-list').scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
                categoriesBody.appendChild(item);
            });
        }

        function renderCategoryFilters() {
            const filtersContainer = document.getElementById('category-filters');
            filtersContainer.innerHTML = '';
            
            const categories = ['all', ...new Set(products.map(p => p.category))];
            const categoryLabels = {
                'all': 'üî• Todo el Men√∫',
                'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ofertas Familiares': 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Familiares',
                'üë´ Ofertas para Dos': 'üë´ Para Dos',
                'üßë Ofertas Personales': 'üßë Personales',
                'üçΩÔ∏è Platos Extras': 'üçΩÔ∏è Extras',
                '‚ûï Agregados': '‚ûï Agregados'
            };
            
            categories.forEach(category => {
                const btn = document.createElement('button');
                btn.textContent = categoryLabels[category] || category;
                btn.dataset.category = category;
                btn.className = 'category-filter';
                const isSelected = category === selectedCategory;
                btn.style.cssText = `padding: 12px 24px; border: 2px solid ${isSelected ? '#DC2626' : 'rgba(0, 0, 0, 0.1)'}; background: ${isSelected ? 'linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)' : 'rgba(255, 255, 255, 0.8)'}; color: ${isSelected ? 'white' : '#000000'}; border-radius: 12px; font-weight: 700; cursor: pointer; transition: all 0.3s; font-size: 14px; backdrop-filter: blur(10px); box-shadow: ${isSelected ? '0 4px 16px rgba(220, 38, 38, 0.4)' : 'none'};`;
                
                btn.addEventListener('click', function() {
                    selectedCategory = this.dataset.category;
                    renderCategoryFilters();
                    renderProducts();
                });
                
                btn.addEventListener('mouseover', function() {
                    if (category !== selectedCategory) {
                        this.style.background = 'rgba(255, 255, 255, 0.08)';
                        this.style.borderColor = 'rgba(220, 38, 38, 0.3)';
                    }
                });
                
                btn.addEventListener('mouseout', function() {
                    if (category !== selectedCategory) {
                        this.style.background = 'rgba(255, 255, 255, 0.03)';
                        this.style.borderColor = 'rgba(255, 255, 255, 0.1)';
                    }
                });
                
                filtersContainer.appendChild(btn);
            });
            
            updateCarouselArrows();
        }
        
        function updateCarouselArrows() {
            const container = document.getElementById('category-filters');
            const leftArrow = document.getElementById('carousel-left');
            const rightArrow = document.getElementById('carousel-right');
            
            if (!container || !leftArrow || !rightArrow) return;
            
            const isAtStart = container.scrollLeft <= 10;
            const isAtEnd = container.scrollLeft >= container.scrollWidth - container.clientWidth - 10;
            
            if (isAtStart) {
                leftArrow.classList.add('hidden');
            } else {
                leftArrow.classList.remove('hidden');
            }
            
            if (isAtEnd) {
                rightArrow.classList.add('hidden');
            } else {
                rightArrow.classList.remove('hidden');
            }
        }
        
        function setupCarousel() {
            const container = document.getElementById('category-filters');
            const leftArrow = document.getElementById('carousel-left');
            const rightArrow = document.getElementById('carousel-right');
            
            if (!container || !leftArrow || !rightArrow) return;
            
            leftArrow.addEventListener('click', () => {
                container.scrollBy({ left: -200, behavior: 'smooth' });
                setTimeout(updateCarouselArrows, 300);
            });
            
            rightArrow.addEventListener('click', () => {
                container.scrollBy({ left: 200, behavior: 'smooth' });
                setTimeout(updateCarouselArrows, 300);
            });
            
            container.addEventListener('scroll', updateCarouselArrows);
            
            window.addEventListener('resize', updateCarouselArrows);
        }

        function renderProducts() {
            const productsContainer = document.getElementById('products-list');
            productsContainer.innerHTML = '';
            
            const filteredProducts = selectedCategory === 'all' 
                ? products 
                : products.filter(p => p.category === selectedCategory);
            
            const categories = {};
            filteredProducts.forEach(product => {
                if (!categories[product.category]) {
                    categories[product.category] = [];
                }
                categories[product.category].push(product);
            });
            
            Object.keys(categories).forEach(category => {
                if (selectedCategory === 'all') {
                    const categoryHeader = document.createElement('div');
                    categoryHeader.style.cssText = 'grid-column: 1 / -1; margin-top: 32px; margin-bottom: 20px; padding: 0;';
                    categoryHeader.innerHTML = `<h3 style="font-size: 28px; font-weight: 900; color: #000000; border-bottom: 3px solid #DC2626; padding-bottom: 12px; display: inline-block; max-width: 100%;">${category}</h3>`;
                    productsContainer.appendChild(categoryHeader);
                }
                
                categories[category].forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.style.cssText = 'background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 2px solid rgba(0, 0, 0, 0.1); border-radius: 16px; overflow: hidden; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: all 0.3s;';
                    
                    card.innerHTML = `
                        <div style="width: 100%; height: 200px; overflow: hidden; position: relative;">
                            <img src="${product.image}" alt="${product.name}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" onload="this.parentElement.addEventListener('mouseenter', () => this.style.transform='scale(1.1)'); this.parentElement.addEventListener('mouseleave', () => this.style.transform='scale(1)')">
                            <div style="display: none; width: 100%; height: 100%; background: linear-gradient(135deg, #DC2626, #B91C1C); align-items: center; justify-content: center; font-size: 64px;">üçó</div>
                            <div style="position: absolute; top: 12px; right: 12px; background: rgba(220, 38, 38, 0.95); backdrop-filter: blur(10px); padding: 6px 12px; border-radius: 8px; font-size: 16px; font-weight: 900; color: white; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);">$${product.price.toLocaleString()}</div>
                        </div>
                        <div style="padding: 20px;">
                            <h3 style="font-size: 18px; font-weight: 800; color: #000000; margin-bottom: 8px; min-height: 48px; line-height: 1.3;">${product.name}</h3>
                            <p style="font-size: 14px; color: rgba(0, 0, 0, 0.6); margin-bottom: 16px; min-height: 40px; line-height: 1.4;">${product.description}</p>
                            <div style="display: flex; align-items: center; justify-content: center; gap: 16px; padding-top: 12px; border-top: 1px solid rgba(0, 0, 0, 0.1);">
                                <button class="quantity-btn btn-minus" data-id="${product.id}" style="width: 40px; height: 40px; border-radius: 50%; background: rgba(220, 38, 38, 0.1); color: #DC2626; border: 2px solid rgba(220, 38, 38, 0.3); font-size: 22px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#DC2626'; this.style.color='white'" onmouseout="this.style.background='rgba(220, 38, 38, 0.1)'; this.style.color='#DC2626'">‚àí</button>
                                <span id="qty-${product.id}" style="font-size: 24px; font-weight: 900; color: #000000; min-width: 40px; text-align: center;">0</span>
                                <button class="quantity-btn btn-plus" data-id="${product.id}" style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; border: none; font-size: 22px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">+</button>
                            </div>
                        </div>
                    `;
                    
                    card.addEventListener('mouseenter', function() {
                        this.style.borderColor = 'rgba(220, 38, 38, 0.4)';
                        this.style.boxShadow = '0 8px 32px rgba(220, 38, 38, 0.2)';
                    });
                    
                    card.addEventListener('mouseleave', function() {
                        this.style.borderColor = 'rgba(0, 0, 0, 0.1)';
                        this.style.boxShadow = '0 4px 16px rgba(0, 0, 0, 0.08)';
                    });
                    
                    productsContainer.appendChild(card);
                });
            });
            
            document.querySelectorAll('.btn-plus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    cart[id] = (cart[id] || 0) + 1;
                    updateCart();
                });
            });
            
            document.querySelectorAll('.btn-minus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    if (cart[id] && cart[id] > 0) {
                        cart[id]--;
                        if (cart[id] === 0) delete cart[id];
                        updateCart();
                    }
                });
            });
        }

        function updateCart() {
            let total = 0;
            let totalItems = 0;
            const MINIMUM_AMOUNT = 200000;
            
            products.forEach(product => {
                const qty = cart[product.id] || 0;
                const qtyElement = document.getElementById(`qty-${product.id}`);
                if (qtyElement) {
                    qtyElement.textContent = qty;
                }
                total += qty * product.price;
                totalItems += qty;
            });
            
            const cartBadgeHeader = document.getElementById('cart-badge-header');
            const progressBarHeader = document.getElementById('progress-bar-header');
            const remainingAmountHeader = document.getElementById('remaining-amount-header');
            const progressPercentage = document.getElementById('progress-percentage');
            const cartTotalDropdown = document.getElementById('cart-total-dropdown');
            const cartMinimumWarning = document.getElementById('cart-minimum-warning');
            
            if (cartBadgeHeader) cartBadgeHeader.textContent = totalItems;
            if (cartTotalDropdown) cartTotalDropdown.textContent = `$${total.toLocaleString()}`;
            
            if (cartMinimumWarning) {
                if (totalItems > 0 && total < MINIMUM_AMOUNT) {
                    const remaining = MINIMUM_AMOUNT - total;
                    cartMinimumWarning.style.display = 'block';
                    cartMinimumWarning.querySelector('div').innerHTML = `‚ö†Ô∏è Monto m√≠nimo para reservas: $${MINIMUM_AMOUNT.toLocaleString()}<br><br>Tu pedido actual: $${total.toLocaleString()}<br>Falta: $${remaining.toLocaleString()} para completar tu reserva`;
                } else {
                    cartMinimumWarning.style.display = 'none';
                }
            }
            
            if (progressBarHeader && remainingAmountHeader && progressPercentage) {
                const percentage = Math.min((total / MINIMUM_AMOUNT) * 100, 100);
                progressBarHeader.style.width = `${percentage}%`;
                progressPercentage.textContent = `${Math.round(percentage)}%`;
                
                if (total >= MINIMUM_AMOUNT) {
                    remainingAmountHeader.textContent = '‚úÖ M√≠nimo alcanzado';
                    remainingAmountHeader.style.color = '#16A34A';
                    progressPercentage.style.color = '#16A34A';
                } else {
                    const remaining = MINIMUM_AMOUNT - total;
                    remainingAmountHeader.textContent = `Faltan $${remaining.toLocaleString()} para m√≠nimo`;
                    remainingAmountHeader.style.color = 'rgba(0, 0, 0, 0.6)';
                    progressPercentage.style.color = '#DC2626';
                }
            }
            
            renderCartDropdown();
        }

        function renderCartDropdown() {
            const cartBody = document.getElementById('cart-dropdown-body');
            cartBody.innerHTML = '';
            
            let hasItems = false;
            products.forEach(product => {
                const qty = cart[product.id] || 0;
                if (qty > 0) {
                    hasItems = true;
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'cart-item';
                    itemDiv.innerHTML = `
                        <div style="flex: 1;">
                            <div style="font-weight: 800; color: #000000; font-size: 14px; margin-bottom: 4px;">${product.name}</div>
                            <div style="color: rgba(0, 0, 0, 0.6); font-size: 12px;">$${product.price.toLocaleString()} √ó ${qty}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <button class="cart-minus" data-id="${product.id}" style="width: 28px; height: 28px; border-radius: 50%; background: rgba(220, 38, 38, 0.1); color: #DC2626; border: 2px solid rgba(220, 38, 38, 0.3); font-size: 16px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#DC2626'; this.style.color='white'" onmouseout="this.style.background='rgba(220, 38, 38, 0.1)'; this.style.color='#DC2626'">‚àí</button>
                            <span style="font-weight: 900; color: #000000; min-width: 24px; text-align: center; font-size: 14px;">${qty}</span>
                            <button class="cart-plus" data-id="${product.id}" style="width: 28px; height: 28px; border-radius: 50%; background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%); color: white; border: none; font-size: 16px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">+</button>
                            <div style="font-weight: 900; color: #DC2626; margin-left: 8px; min-width: 70px; text-align: right; font-size: 14px;">$${(product.price * qty).toLocaleString()}</div>
                        </div>
                    `;
                    cartBody.appendChild(itemDiv);
                }
            });
            
            if (!hasItems) {
                cartBody.innerHTML = '<div style="text-align: center; padding: 40px 20px; color: rgba(0, 0, 0, 0.4); font-size: 14px;">üõí<br><br>Tu carrito est√° vac√≠o</div>';
            }
            
            document.querySelectorAll('.cart-plus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    cart[id] = (cart[id] || 0) + 1;
                    updateCart();
                });
            });
            
            document.querySelectorAll('.cart-minus').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    if (cart[id] && cart[id] > 0) {
                        cart[id]--;
                        if (cart[id] === 0) delete cart[id];
                        updateCart();
                    }
                });
            });
        }

        function updateFooter() {
            const config = window.elementSdk?.config || defaultConfig;
            const whatsappNumber = config.whatsapp_number || defaultConfig.whatsapp_number;
            const restaurantName = config.restaurant_name || defaultConfig.restaurant_name;
            
            const footerWhatsapp = document.getElementById('footer-whatsapp');
            if (footerWhatsapp) {
                footerWhatsapp.textContent = `+${whatsappNumber}`;
            }
            
            const footerWhatsappLink = document.getElementById('footer-whatsapp-link');
            if (footerWhatsappLink) {
                const message = encodeURIComponent(`Hola, necesito informaci√≥n sobre ${restaurantName}`);
                footerWhatsappLink.href = `https://wa.me/${whatsappNumber}?text=${message}`;
            }
        }

        function setupEventListeners() {
            document.getElementById('btn-back-from-schedule')?.addEventListener('click', showReservationFlow);
            document.getElementById('btn-back-from-policies')?.addEventListener('click', showReservationFlow);
            
            document.getElementById('btn-date-next')?.addEventListener('click', () => {
                const dateValue = document.getElementById('date-input').value;
                if (!dateValue) {
                    showInlineMessage('Por favor selecciona una fecha', 'date-step');
                    return;
                }
                selectedDate = dateValue;
                selectedTime = '';
                const config = window.elementSdk?.config || defaultConfig;
                renderTimeSlots(config);
                goToStep(2);
            });

            document.getElementById('btn-time-back')?.addEventListener('click', () => goToStep(1));
            document.getElementById('btn-time-next')?.addEventListener('click', () => {
                if (!selectedTime) {
                    showInlineMessage('Por favor selecciona una hora', 'time-step');
                    return;
                }
                goToStep(3);
            });
            
            document.getElementById('btn-categories-menu')?.addEventListener('click', () => {
                const panel = document.getElementById('categories-dropdown');
                if (panel.style.display === 'none' || panel.style.display === '') {
                    panel.style.display = 'flex';
                    document.getElementById('cart-dropdown-panel').style.display = 'none';
                } else {
                    panel.style.display = 'none';
                }
            });
            
            document.getElementById('close-categories-dropdown')?.addEventListener('click', () => {
                document.getElementById('categories-dropdown').style.display = 'none';
            });
            
            document.getElementById('btn-view-cart')?.addEventListener('click', () => {
                const panel = document.getElementById('cart-dropdown-panel');
                if (panel.style.display === 'none' || panel.style.display === '') {
                    panel.style.display = 'flex';
                    document.getElementById('categories-dropdown').style.display = 'none';
                } else {
                    panel.style.display = 'none';
                }
            });
            
            document.getElementById('close-cart-dropdown')?.addEventListener('click', () => {
                document.getElementById('cart-dropdown-panel').style.display = 'none';
            });
            
            document.getElementById('btn-continue-to-data')?.addEventListener('click', () => {
                if (Object.keys(cart).length === 0) {
                    showInlineMessage('Por favor selecciona al menos un producto', 'products-step');
                    return;
                }
                
                let total = 0;
                products.forEach(product => {
                    const qty = cart[product.id] || 0;
                    total += qty * product.price;
                });
                
                const MINIMUM_AMOUNT = 200000;
                if (total < MINIMUM_AMOUNT) {
                    const remaining = MINIMUM_AMOUNT - total;
                    showInlineMessage(`‚ö†Ô∏è Monto m√≠nimo para reservas: $200.000\n\nTu pedido actual: $${total.toLocaleString()}\nFalta: $${remaining.toLocaleString()} para completar tu reserva`, 'products-step');
                    return;
                }
                
                document.getElementById('cart-dropdown-panel').style.display = 'none';
                updateSummary();
                goToStep(4);
            });

            document.getElementById('btn-data-back')?.addEventListener('click', () => goToStep(3));
            
            document.getElementById('customer-form')?.addEventListener('submit', async (e) => {
                e.preventDefault();
                await submitReservation();
            });

            document.getElementById('btn-new-reservation')?.addEventListener('click', resetForm);
            
            document.getElementById('btn-home')?.addEventListener('click', resetForm);
        }

        function showInlineMessage(message, stepId) {
            const step = document.getElementById(stepId);
            const existing = step.querySelector('.inline-message');
            if (existing) existing.remove();
            
            const msg = document.createElement('div');
            msg.className = 'inline-message';
            msg.style.cssText = 'background: rgba(220, 38, 38, 0.1); backdrop-filter: blur(10px); color: #DC2626; padding: 20px; border-radius: 12px; margin-bottom: 20px; font-weight: 700; text-align: center; border: 2px solid rgba(220, 38, 38, 0.3); font-size: 15px; line-height: 1.6; white-space: pre-line;';
            msg.textContent = message;
            step.insertBefore(msg, step.firstChild);
            
            setTimeout(() => {
                msg.style.opacity = '0';
                msg.style.transform = 'translateY(-10px)';
                msg.style.transition = 'all 0.3s';
                setTimeout(() => msg.remove(), 300);
            }, 5000);
        }

        function showReservationFlow() {
            document.getElementById('schedule-page').style.display = 'none';
            document.getElementById('policies-page').style.display = 'none';
            
            document.querySelector('.step-indicator').parentElement.style.display = 'flex';
            
            goToStep(currentStep > 0 ? currentStep : 1);
        }
        
        function hideAllSteps() {
            document.getElementById('date-step').style.display = 'none';
            document.getElementById('time-step').style.display = 'none';
            document.getElementById('products-step').style.display = 'none';
            document.getElementById('data-step').style.display = 'none';
            document.getElementById('success-message').style.display = 'none';
            document.getElementById('schedule-page').style.display = 'none';
            document.getElementById('policies-page').style.display = 'none';
        }
        
        function goToStep(step) {
            hideAllSteps();
            
            document.querySelector('.step-indicator').parentElement.style.display = 'flex';
            
            for (let i = 1; i <= 4; i++) {
                const stepEl = document.getElementById(`step-${i}`);
                stepEl.classList.remove('step-active', 'step-completed');
                stepEl.classList.add('step-inactive');
            }
            
            for (let i = 1; i < step; i++) {
                document.getElementById(`step-${i}`).classList.remove('step-inactive');
                document.getElementById(`step-${i}`).classList.add('step-completed');
            }
            
            document.getElementById(`step-${step}`).classList.remove('step-inactive');
            document.getElementById(`step-${step}`).classList.add('step-active');
            
            if (step === 1) document.getElementById('date-step').style.display = 'block';
            if (step === 2) document.getElementById('time-step').style.display = 'block';
            if (step === 3) {
                document.getElementById('products-step').style.display = 'block';
                document.getElementById('main-content-card').style.padding = '48px 0';
            } else {
                document.getElementById('main-content-card').style.padding = '48px';
            }
            if (step === 4) document.getElementById('data-step').style.display = 'block';
            
            currentStep = step;
            
            const categoriesBtn = document.getElementById('btn-categories-menu');
            const viewCartBtn = document.getElementById('btn-view-cart');
            const progressContainer = document.getElementById('progress-container');
            
            if (step === 3) {
                categoriesBtn.style.display = 'block';
                viewCartBtn.style.display = 'flex';
                progressContainer.style.display = 'block';
            } else {
                categoriesBtn.style.display = 'none';
                viewCartBtn.style.display = 'flex';
                progressContainer.style.display = 'none';
            }
            
            const homeBtn = document.getElementById('btn-home');
            if (step > 1) {
                homeBtn.style.display = 'flex';
            } else {
                homeBtn.style.display = 'none';
            }
            
            updateCart();
        }

        function updateSummary() {
            const formattedDate = new Date(selectedDate + 'T00:00:00').toLocaleDateString('es-CL', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('summary-date').textContent = formattedDate;
            document.getElementById('summary-time').textContent = selectedTime;
            
            let total = 0;
            products.forEach(product => {
                const qty = cart[product.id] || 0;
                total += qty * product.price;
            });
            document.getElementById('summary-total').textContent = `$${total.toLocaleString()}`;
        }

        async function submitReservation() {
            const submitBtn = document.getElementById('btn-submit');
            const submitText = document.getElementById('submit-text');
            const submitLoading = document.getElementById('submit-loading');
            
            submitBtn.disabled = true;
            submitText.style.display = 'none';
            submitLoading.style.display = 'block';
            
            const nombre = document.getElementById('customer-name').value;
            const telefono = document.getElementById('customer-phone').value;
            const rut = document.getElementById('customer-rut').value;
            const cantidadPersonas = document.getElementById('customer-people').value;
            const motivoReserva = document.getElementById('customer-reason').value;
            const comentario = document.getElementById('customer-comment').value;
            
            let total = 0;
            let productosTexto = '';
            products.forEach(product => {
                const qty = cart[product.id] || 0;
                if (qty > 0) {
                    productosTexto += `${product.name} x${qty} ($${(product.price * qty).toLocaleString()}), `;
                    total += qty * product.price;
                }
            });
            productosTexto = productosTexto.slice(0, -2);
            
            if (window.dataSdk) {
                const createResult = await window.dataSdk.create({
                    fecha: selectedDate,
                    hora: selectedTime,
                    nombre: nombre,
                    telefono: telefono,
                    rut: rut,
                    cantidad_personas: cantidadPersonas,
                    motivo_reserva: motivoReserva,
                    comentario: comentario,
                    productos: productosTexto,
                    total: total,
                    estado: 'Pendiente',
                    timestamp: new Date().toISOString()
                });
                
                if (!createResult.isOk) {
                    showInlineMessage('Error al guardar la reserva', 'data-step');
                    submitBtn.disabled = false;
                    submitText.style.display = 'block';
                    submitLoading.style.display = 'none';
                    return;
                }
            }
            
            const config = window.elementSdk?.config || defaultConfig;
            const whatsappNumber = config.whatsapp_number || defaultConfig.whatsapp_number;
            const restaurantName = config.restaurant_name || defaultConfig.restaurant_name;
            
            const formattedDate = new Date(selectedDate + 'T00:00:00').toLocaleDateString('es-CL', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            let message = `üçó *NUEVA RESERVA - ${restaurantName}*\n\n` +
                `üìÖ *Fecha:* ${formattedDate}\n` +
                `üïê *Hora:* ${selectedTime}\n` +
                `üë• *Cantidad de Personas:* ${cantidadPersonas}\n` +
                `üéØ *Motivo:* ${motivoReserva}\n\n` +
                `üë§ *DATOS DEL CLIENTE*\n` +
                `Nombre: ${nombre}\n` +
                `Tel√©fono: ${telefono}\n` +
                `RUT: ${rut}\n\n` +
                `üçΩÔ∏è *PRODUCTOS SOLICITADOS*\n${productosTexto}\n\n` +
                `üí∞ *TOTAL: $${total.toLocaleString()}*`;
            
            if (comentario.trim()) {
                message += `\n\nüí¨ *COMENTARIO*\n${comentario}`;
            }
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
            
            setTimeout(() => {
                submitBtn.disabled = false;
                submitText.style.display = 'block';
                submitLoading.style.display = 'none';
                showSuccess();
            }, 1000);
        }

        function showSuccess() {
            document.getElementById('data-step').style.display = 'none';
            document.getElementById('success-message').style.display = 'block';
        }

        function resetForm() {
            selectedDate = '';
            selectedTime = '';
            cart = {};
            currentStep = 1;
            
            document.getElementById('customer-form').reset();
            
            hideAllSteps();
            
            goToStep(1);
            
            document.getElementById('btn-home').style.display = 'none';
            
            updateCart();
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('click', (e) => {
            const cartDropdown = document.getElementById('cart-dropdown-panel');
            const categoriesDropdown = document.getElementById('categories-dropdown');
            const cartBtn = document.getElementById('btn-view-cart');
            const categoriesBtn = document.getElementById('btn-categories-menu');
            
            if (!cartDropdown.contains(e.target) && !cartBtn.contains(e.target)) {
                cartDropdown.style.display = 'none';
            }
            
            if (!categoriesDropdown.contains(e.target) && !categoriesBtn.contains(e.target)) {
                categoriesDropdown.style.display = 'none';
            }
        });

        init();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a907bf853e6b4ef',t:'MTc2NDkwNTYyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>